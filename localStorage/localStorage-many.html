<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		
	</style>
</head>
<body>
	<h2>商品列表</h2>
	<span>电脑</span>
	<span>鼠标</span>
	<span>被子</span>
	<span>窗户</span>
	<span>手机</span>

	<hr/>

	<ul id="list">

	</ul>
	<script>

		let data2 = localStorage.getItem('car');
		let data2Arr = JSON.parse(data2)
		

		window.addEventListener('storage',function(){

			let data = localStorage.getItem('car');
			let dataArr = JSON.parse(data);

			arr = dataArr;
			
			let html = dataArr.map(function(item){
				return `<li>${item}</li>`;
			}).join('')

			list.innerHTML = html;
		})


		
		
		if(data2Arr){
			let html = data2Arr.map(function(item){
				return `<li>${item}</li>`
			}).join('')
			
			list.innerHTML = html;
		}

		let spans = document.getElementsByTagName('span')
		let arr = [];

		for (var i = 0; i < spans.length; i++) {
			spans[i].onclick = function(){
				let str = `<li>${this.innerHTML}</li>`;
				list.innerHTML += str;

				arr.push( this.innerHTML )
				console.log(arr)
				localStorage.setItem('car',JSON.stringify(arr))
			}
		}
	</script>
</body>
</html>